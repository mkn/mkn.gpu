#! clean build test run -tOp rocm -x res/mkn/hipcc

name: mkn.gpu
parent: headers

profile:
- name: headers
  inc: inc
  dep: mkn.kul

- name: rocm
  parent: headers
  arg: -DMKN_GPU_ROCM
  test: test/any/(\w).cpp
        test/hip/(\w).cpp

- name: cuda
  parent: headers
  arg: -DMKN_GPU_CUDA
  test: test/any/(\w).cpp
        test/cuda/(\w).cpp


# if you have no GPU but want to test your code
- name: pseudo_gpu
  parent: headers
  arg: -DMKN_GPU_CPU
  test: test/any/(\w).cpp


- name: format
  mod: |
    clang.format{init{style: file, paths: inc}}

